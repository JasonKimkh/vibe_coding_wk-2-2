name: ìƒˆë¡œìš´ ê¸°ì—¬ìž í™˜ì˜

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]

jobs:
  welcome:
    runs-on: ubuntu-latest
    
    steps:
    - name: ì²« ë²ˆì§¸ ê¸°ì—¬ìž í™•ì¸ ë° í™˜ì˜
      uses: actions/github-script@v7
      with:
        script: |
          // ê¸°ì—¬ìžì˜ ê³¼ê±° í™œë™ í™•ì¸
          const { data: issues } = await github.rest.issues.listForRepo({
            owner: context.repo.owner,
            repo: context.repo.repo,
            creator: context.payload.sender.login,
            state: 'all'
          });
          
          const { data: prs } = await github.rest.pulls.list({
            owner: context.repo.owner,
            repo: context.repo.repo,
            state: 'all'
          });
          
          const userPRs = prs.filter(pr => pr.user.login === context.payload.sender.login);
          
          const isFirstTimeContributor = issues.length <= 1 && userPRs.length <= 1;
          
          if (isFirstTimeContributor) {
            let message = '';
            
            if (context.eventName === 'issues') {
              message = `## ðŸŽ‰ ì²« ë²ˆì§¸ ì´ìŠˆë¥¼ í™˜ì˜í•©ë‹ˆë‹¤!
              
ì•ˆë…•í•˜ì„¸ìš” @${context.payload.sender.login}ë‹˜! ì²« ë²ˆì§¸ ì´ìŠˆ ë“±ë¡í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ðŸ™

### ðŸ“‹ ë‹¤ìŒ ë‹¨ê³„
- ì´ìŠˆê°€ ìžë™ìœ¼ë¡œ ë¶„ë¥˜ë˜ê³  ì ì ˆí•œ ë‹´ë‹¹ìžì—ê²Œ í• ë‹¹ë©ë‹ˆë‹¤
- í•„ìš”í•œ ê²½ìš° ì¶”ê°€ ì •ë³´ë¥¼ ìš”ì²­ë“œë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤
- ì§„í–‰ ìƒí™©ì€ ì´ ì´ìŠˆì—ì„œ ê³„ì† ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤

### ðŸ¤ ê¸°ì—¬ ë°©ë²•
í”„ë¡œì íŠ¸ì— ì§ì ‘ ê¸°ì—¬í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´:
- [ê¸°ì—¬ ê°€ì´ë“œ](https://github.com/${context.repo.owner}/${context.repo.repo}/blob/main/CONTRIBUTING.md)ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”
- [good-first-issue](https://github.com/${context.repo.owner}/${context.repo.repo}/labels/good-first-issue) ë¼ë²¨ì´ ë¶™ì€ ì´ìŠˆë“¤ì„ ì‚´íŽ´ë³´ì„¸ìš”

ë‹¤ì‹œ í•œë²ˆ ì°¸ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ðŸš€`;
            } else {
              message = `## ðŸŽ‰ ì²« ë²ˆì§¸ Pull Requestë¥¼ í™˜ì˜í•©ë‹ˆë‹¤!
              
ì•ˆë…•í•˜ì„¸ìš” @${context.payload.sender.login}ë‹˜! ì²« ë²ˆì§¸ PR ìƒì„±í•´ì£¼ì…”ì„œ ì •ë§ ê°ì‚¬í•©ë‹ˆë‹¤! ðŸ™

### ðŸ“‹ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤
- ìžë™ í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤
- ì½”ë“œ ë¦¬ë·°ì–´ê°€ ìžë™ìœ¼ë¡œ í• ë‹¹ë©ë‹ˆë‹¤
- ë¦¬ë·° í”¼ë“œë°±ì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤
- ëª¨ë“  í™•ì¸ì´ ì™„ë£Œë˜ë©´ ë³‘í•©ë©ë‹ˆë‹¤

### ðŸ’¡ ìœ ìš©í•œ íŒ
- [ê¸°ì—¬ ê°€ì´ë“œ](https://github.com/${context.repo.owner}/${context.repo.repo}/blob/main/CONTRIBUTING.md)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”
- PR í…œí”Œë¦¿ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”
- ì§ˆë¬¸ì´ ìžˆìœ¼ì‹œë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”

í›Œë¥­í•œ ê¸°ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ðŸš€`;
            }
            
            await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: message
            });
          } 